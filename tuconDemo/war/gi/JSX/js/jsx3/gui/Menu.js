/*
 * Copyright (c) 2001-2009, TIBCO Software Inc.
 * Use, modification, and distribution subject to terms of license.
 */
jsx3.require("jsx3.xml.Cacheable","jsx3.gui.Form","jsx3.gui.Heavyweight","jsx3.gui.Block","jsx3.gui.ToolbarButton","jsx3.util.MessageFormat");jsx3.Class.defineClass("jsx3.gui.Menu",jsx3.gui.Block,[jsx3.xml.Cacheable,jsx3.xml.CDF,jsx3.gui.Form],function(o,r){var
ub={A:"jsxid",Aa:"blur",B:"jsxselected",Ba:"nk",C:"jsxindex",Ca:"focus",D:"url(",Da:"Pe",E:")",Ea:"1 4 1 0",F:"jsxtype",Fa:"span",G:"Book",Ga:"relativebox",H:"focusPrevious",Ha:"box",I:"focusNext",Ia:"0 0 0 4",J:"none",Ja:"0px;0px;0px;solid 1px ",K:"jsxspy",Ka:"5 4 5 0",L:"jsxhide",La:");",M:"jsxmenu",Ma:"id='",N:"Menu.showTopMenu",Na:"' ",O:"jsx30menu_",Oa:" class='jsx30toolbarbutton'",P:"_list",Pa:"class='jsx30toolbarbutton_img'",Q:'<div tabindex="0" jsxindex="',Qa:"class='jsx30toolbarbutton_lbl'",R:'"',Ra:"&#160;",S:"mouseover",Sa:"class='jsx30toolbarbutton_mnu'",T:"j8",Ta:"overflow:hidden;",U:"keydown",Ua:"background-color:",V:"gu",Va:";",W:"click",Wa:"class='jsx30toolbarbutton_cap'",X:"hO",Xa:"jsxexecute",Y:"mousedown",Ya:"#808080",Z:"UC",Za:"3.0.00",_:"mouseup",_a:"td",a:"background-image:url(",aa:"yz",ab:"jsx3.gui.Matrix",b:"jsx:///images/menu/bg.gif",ba:' class="',bb:"pt",c:");background-repeat:repeat-y;",ca:'" style="',cb:"border",d:"#ffffff",da:'">',db:"padding",e:"jsx:///xsl/jsxmenu.xsl",ea:"</div>",f:"<?xml version=\"1.0\" encoding=\"UTF-8\"?><xsl:stylesheet xmlns:msxsl=\"urn:schemas-microsoft-com:xslt\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\"><xsl:output method=\"xml\" omit-xml-declaration=\"yes\"/><xsl:param name=\"jsxtabindex\">0</xsl:param><xsl:param name=\"jsxleftbuffer\">36</xsl:param><xsl:param name=\"jsxselectedimage\"/><xsl:param name=\"jsxtransparentimage\"/><xsl:param name=\"jsxsubmenuimage\"/><xsl:param name=\"jsxdragtype\">JSX_GENERIC</xsl:param><xsl:param name=\"jsxrootid\">jsxroot</xsl:param><xsl:param name=\"jsxid\">jsxroot</xsl:param><xsl:param name=\"jsxsortpath\"/><xsl:param name=\"jsxsortdirection\">ascending</xsl:param><xsl:param name=\"jsxsorttype\">text</xsl:param><xsl:param name=\"jsxpath\"/><xsl:param name=\"jsxpathapps\"/><xsl:param name=\"jsxpathprefix\"/><xsl:param name=\"jsxappprefix\"/><xsl:param name=\"jsxdisableescape\">no</xsl:param><xsl:param name=\"jsxmode\">0</xsl:param><xsl:param name=\"jsxkeycodes\"/><xsl:param name=\"jsx_img_resolve\">1</xsl:param><xsl:param name=\"jsxtitle\"/><xsl:param name=\"jsxasyncmessage\"/><xsl:template match=\"/\"><JSX_FF_WELLFORMED_WRAPPER><xsl:choose><xsl:when test=\"$jsxasyncmessage and $jsxasyncmessage!=''\"><xsl:value-of select=\"$jsxasyncmessage\"/></xsl:when><xsl:otherwise><xsl:apply-templates select=\"//*[@jsxid=$jsxrootid]\"/></xsl:otherwise></xsl:choose></JSX_FF_WELLFORMED_WRAPPER></xsl:template><xsl:template match=\"*\"><xsl:param name=\"mystyle\" select=\"@jsxstyle\"/><xsl:variable name=\"jsxleftbuffer_sel\"><xsl:text>left:</xsl:text><xsl:choose><xsl:when test=\"$jsxleftbuffer &gt; 12\"><xsl:value-of select=\"$jsxleftbuffer - 11\"/></xsl:when><xsl:otherwise><xsl:text>-9</xsl:text></xsl:otherwise></xsl:choose><xsl:text>px</xsl:text></xsl:variable><xsl:variable name=\"jsxleftbuffer_txt\"><xsl:text>padding-left:</xsl:text><xsl:value-of select=\"$jsxleftbuffer\"/><xsl:text>px</xsl:text></xsl:variable><xsl:for-each select=\"record\"><xsl:sort data-type=\"{$jsxsorttype}\" order=\"{$jsxsortdirection}\" select=\"@*[name()=$jsxsortpath]\"/><xsl:choose><xsl:when test=\"@jsxdivider[.='1']\"><div class=\"jsx30menu_{$jsxmode}_div\" jsxdisabled=\"1\" jsxtype=\"Divider\"><div>&#160;</div></div></xsl:when></xsl:choose><div id=\"{$jsxid}_{@jsxid}\" jsxid=\"{@jsxid}\" tabindex=\"{$jsxtabindex}\"><xsl:choose><xsl:when test=\"@jsxdisabled='1' or (record and not(record[not(@jsxdisabled='1')]))\"><xsl:attribute name=\"class\">jsx30menu_<xsl:value-of select=\"$jsxmode\"/>_itemdis</xsl:attribute></xsl:when><xsl:otherwise><xsl:attribute name=\"class\">jsx30menu_<xsl:value-of select=\"$jsxmode\"/>_item</xsl:attribute></xsl:otherwise></xsl:choose><xsl:choose><xsl:when test=\"@jsxtip\"><xsl:attribute name=\"title\"><xsl:value-of select=\"@jsxtip\"/></xsl:attribute></xsl:when></xsl:choose><xsl:if test=\"@jsxdisabled='1'\"><xsl:attribute name=\"jsxdisabled\">1</xsl:attribute></xsl:if><xsl:attribute name=\"jsxtype\"><xsl:choose><xsl:when test=\"record or (@jsxlazy &gt; 0)\">Book</xsl:when><xsl:otherwise>Leaf</xsl:otherwise></xsl:choose></xsl:attribute><xsl:choose><xsl:when test=\"@jsximg\"><xsl:variable name=\"src1\"><xsl:choose><xsl:when test=\"$jsx_img_resolve='1'\"><xsl:apply-templates mode=\"uri-resolver\" select=\"@jsximg\"/></xsl:when><xsl:otherwise><xsl:value-of select=\"@jsximg\"/></xsl:otherwise></xsl:choose></xsl:variable><img src=\"{$src1}\" style=\"position:absolute;left:2px;top:2px;width:16px;height:16px;\"/></xsl:when></xsl:choose><xsl:choose><xsl:when test=\"@jsxselected = 1\"><img class=\"jsx30menu_{$jsxmode}_sel\" src=\"{$jsxselectedimage}\" style=\"{$jsxleftbuffer_sel}\"/></xsl:when></xsl:choose><xsl:choose><xsl:when test=\"record or (@jsxlazy &gt; 0)\"><div class=\"jsx30menu_{$jsxmode}_kc\" style=\"{$mystyle};{$jsxleftbuffer_txt}\"><table class=\"jsx30menu_{$jsxmode}_kct\"><tr><td class=\"name\"><xsl:apply-templates mode=\"jsxtext\" select=\".\"/></td><td class=\"keycode\" style=\"background-image:url({$jsxsubmenuimage});background-position:right 2px;background-repeat:no-repeat;\">&#160;</td></tr></table></div></xsl:when><xsl:otherwise><div class=\"jsx30menu_{$jsxmode}_kc\" style=\"{$mystyle};{$jsxleftbuffer_txt}\"><table class=\"jsx30menu_{$jsxmode}_kct\"><tr><td class=\"name\"><xsl:apply-templates mode=\"jsxtext\" select=\".\"/></td><xsl:if test=\"@jsxkeycode\"><td class=\"keycode\"><xsl:apply-templates mode=\"keycode\" select=\".\"/></td></xsl:if></tr></table></div></xsl:otherwise></xsl:choose></div></xsl:for-each></xsl:template><xsl:template match=\"record\" mode=\"keycode\"><xsl:variable name=\"after\" select=\"substring-after($jsxkeycodes, concat(@jsxid,':'))\"/><xsl:choose><xsl:when test=\"$after\"><xsl:value-of select=\"substring-before($after, '|')\"/></xsl:when><xsl:otherwise><xsl:value-of select=\"@jsxkeycode\"/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match=\"record\" mode=\"jsxtext\"><xsl:choose><xsl:when test=\"$jsxdisableescape='yes'\"><xsl:apply-templates mode=\"disable-output-escp\" select=\"@jsxtext\"/></xsl:when><xsl:otherwise><xsl:value-of select=\"@jsxtext\"/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match=\"* | @*\" mode=\"uri-resolver\"><xsl:param name=\"uri\" select=\".\"/><xsl:choose><xsl:when test=\"starts-with($uri,'JSX/')\"><xsl:value-of select=\"concat($jsxpath, $uri)\"/></xsl:when><xsl:when test=\"starts-with($uri,'JSXAPPS/')\"><xsl:value-of select=\"concat($jsxpathapps, $uri)\"/></xsl:when><xsl:when test=\"starts-with($uri,'GI_Builder/')\"><xsl:value-of select=\"concat($jsxpath, $uri)\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsx:///')\"><xsl:value-of select=\"concat($jsxpath, 'JSX/', substring($uri,8))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsx:/')\"><xsl:value-of select=\"concat($jsxpath, 'JSX/', substring($uri,6))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxapp:///')\"><xsl:value-of select=\"concat($jsxappprefix, substring($uri,11))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxapp://')\"><xsl:value-of select=\"concat($jsxpathapps, substring($uri,10))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxapp:/')\"><xsl:value-of select=\"concat($jsxappprefix, substring($uri,9))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxuser:///')\"><xsl:value-of select=\"concat($jsxpathapps, substring($uri,11))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxuser:/')\"><xsl:value-of select=\"concat($jsxpathapps, substring($uri,9))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxaddin://')\"><xsl:value-of select=\"$uri\"/></xsl:when><xsl:when test=\"starts-with($uri,'/')\"><xsl:value-of select=\"$uri\"/></xsl:when><xsl:when test=\"contains($uri,'://')\"><xsl:value-of select=\"$uri\"/></xsl:when><xsl:when test=\"not($jsxpathprefix='') and not(starts-with($uri, $jsxpathprefix))\"><xsl:apply-templates mode=\"uri-resolver\" select=\".\"><xsl:with-param name=\"uri\" select=\"concat($jsxpathprefix, $uri)\"/></xsl:apply-templates></xsl:when><xsl:otherwise><xsl:value-of select=\"$uri\"/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match=\"* | @*\" mode=\"disable-output-escp\"><xsl:call-template name=\"disable-output-escp\"><xsl:with-param name=\"value\" select=\".\"/></xsl:call-template></xsl:template><xsl:template name=\"disable-output-escp\"><xsl:param name=\"value\" select=\".\"/><xsl:choose><xsl:when test=\"function-available('msxsl:node-set')\"><xsl:value-of disable-output-escaping=\"yes\" select=\"$value\"/></xsl:when><xsl:otherwise><span class=\"disable-output-escp\"><xsl:value-of select=\"$value\"/></span></xsl:otherwise></xsl:choose></xsl:template></xsl:stylesheet>",fa:"E",g:"JSX_MENU_XSL",ga:"W",h:"<div tabIndex='0' class='jsx30menu_0_list' onmousedown='var e = jsx3.gui.Event.wrap(event); jsx3.gui.Event.publish(e); e.cancelBubble(); e.cancelReturn();'>- no data -</div>",ha:"N",i:'<div tabIndex="0" class="jsx30menu_{0}_item" onmousedown="var e = jsx3.gui.Event.wrap(event); jsx3.gui.Event.publish(e); e.cancelBubble(); e.cancelReturn();"><div class="jsx30menu_{0}_kc"><table class="jsx30menu_{0}_kct"><tr><td class="name">{1}</td><td class="keycode"></td></tr></table></div></div>',ia:"S",j:"jsx:///images/menu/submenuarrow.gif",ja:"Y",k:"jsx:///images/menu/selectover.gif",ka:"div",l:"jsx:///images/menu/selected.gif",la:"px",m:"jsx:///images/menu/down_menu.gif",ma:"Divider",n:"jsx:///images/menu/off_menu.gif",na:"key",o:"jsx:///images/menu/on_menu.gif",oa:"my",p:"jsx:///images/menu/over_menu.gif",pa:"x",q:"jsx:///images/tbb/down.gif",qa:"JSX_GENERIC",r:"jsx:///images/tbb/on.gif",ra:"jsxabspath",s:"#9B9BB7",sa:"jsxhomepath",t:"jsx30curvisiblemenu_",ta:"jsx3.gui.Menu.noData",u:"",ua:":",v:"jsxdisabled",va:"|",w:"1",wa:"//record[@jsxkeycode]",x:"jsxgroupname",xa:"jsxkeycode",y:"//record[@jsxgroupname='",ya:"record",z:"']",za:"mouseout"};var
fb=jsx3.util.Logger.getLogger(o.jsxclass.getName());var
C=jsx3.gui.Event;var
wb=jsx3.gui.Interactive;var
Ya=jsx3.html;o.DEFAULTBACKGROUND=ub.a+jsx3.resolveURI(ub.b)+ub.c;o.DEFAULTBACKGROUNDCOLOR=ub.d;o.DEFAULTXSLURL=jsx3.resolveURI(ub.e);o.Hs=(new
jsx3.xml.XslDocument()).loadXML(ub.f);o.DEFAULTXSLCACHEID=ub.g;o.DEFAULTCONTEXTLEFTOFFSET=10;o.NODATAMESSAGE=ub.h;o.yu=new
jsx3.util.MessageFormat(ub.i);o.zq=0;o.UV=1;o.aS=12;o.mt=jsx3.resolveURI(ub.j);o.dq=jsx3.resolveURI(ub.k);o.L4=jsx3.resolveURI(ub.l);o.Sz=jsx3.resolveURI(ub.m);o.ZI=jsx3.resolveURI(ub.n);o.Iv=jsx3.resolveURI(ub.o);o.nR=jsx3.resolveURI(ub.p);o.CZ=jsx3.resolveURI(ub.q);o.SD=jsx3.resolveURI(ub.r);Ya.loadImages(ub.b,o.Sz,o.ZI,o.Iv,o.nR,o.L4,o.dq,o.mt,o.CZ,o.SD);o.B3=ub.s;o.KT=null;o.H3=[];o.dL=[];o.Ov=null;o.F5=null;o.bv=null;o.xH=250;o.o1=150;o.Xx=ub.t;o.HQ=1000;r.init=function(e,s){this.jsxsuper(e);if(s!=null)this.setText(s);};r.getImage=function(){return this.jsximage!=null&&jsx3.util.strTrim(this.jsximage)!=ub.u?this.jsximage:null;};r.setImage=function(s){this.jsximage=s;return this;};r.getXSL=function(){return this.qj(o.DEFAULTXSLURL,o.Hs);};r.disableItem=function(n){return this.enableItem(n,false);};r.enableItem=function(n,a){if(a||a==null)this.deleteRecordProperty(n,ub.v,false);else this.insertRecordProperty(n,ub.v,ub.w,false);return this;};r.isItemEnabled=function(b){var
P=this.getRecordNode(b);return P!=null&&P.getAttribute(ub.v)!=ub.w;};r.selectItem=function(m,d){if(d||d==null){var
Va=this.getRecordNode(m);if(Va!=null){var
Xa=Va.getAttribute(ub.x);if(Xa)for(var
bb=(this.getXML()).selectNodeIterator(ub.y+Xa+ub.z);bb.hasNext();){var
ia=bb.next();if(ia.getAttribute(ub.A)!=m)ia.removeAttribute(ub.B);}}this.insertRecordProperty(m,ub.B,1,false);}else this.deleteRecordProperty(m,ub.B,false);return this;};r.deselectItem=function(e){return this.selectItem(e,false);};r.isItemSelected=function(m){var
eb=this.getRecordNode(m);return eb!=null&&eb.getAttribute(ub.B)==ub.w;};r.dx=function(k,l,i){if(i==null)i=parseInt(l.parentNode.parentNode.getAttribute(ub.C));var
ea=o.dL[i];if(ea&&ea!=l){try{ea.style.backgroundImage=ub.D+jsx3.gui.Block.SPACE+ub.E;}catch(Kb){}o.dL[i]=null;}var
v=false;if(l.getAttribute(ub.v)!=ub.w){var
eb=l.getAttribute(ub.A);v=this.eQ(eb);l.style.backgroundImage=ub.D+o.dq+ub.E;o.dL[i]=l;Ya.focus(l);var
M=o.H3[i-1];if(M)M.scrollTo(l);}else Ya.focus(l.parentNode.parentNode);this.BW(v?i+1:i);};r.BW=function(h,j){if(o.H3.length>h&&(o.RI==null||o.RI>h)){if(o.bv)window.clearTimeout(o.bv);this.lH(h,null);o.RI=h;var
zb=this;o.bv=window.setTimeout(function(){if(zb.getParent()==null)return;o.bv=null;o.RI=null;zb.F9(h+1,true);},j?0:o.o1);}};r.eQ=function(c){if(this._jsxP4)return jsx3.util.arrIndexOf(this._jsxP4,c)>=0;return false;};r.lH=function(m,k){if(m<1)return;if(this._jsxP4==null)this._jsxP4=[];if(k==null){this._jsxP4.splice(m-1,this._jsxP4.length);}else this._jsxP4.splice(m-1,this._jsxP4.length,k);};r._ebKeyDown=function(d,i){if(this.jsxsupermix(d,i))return;var
ha=d.keyCode();if((ha==40||ha==13||ha==32)&&!d.hasModifier()){this.showMenu(d,i,1);d.cancelAll();}else if(ha==39){this.yQ(true);}else if(ha==37)this.yQ(false);};r.Xg=function(f,g){if(!f.leftButton())return;this.sK(f,g);g.childNodes[2].style.backgroundImage=ub.D+o.Sz+ub.E;if(this.getState()==o.UV){if(!this._jsxX1)this.F9();}else this.showMenu(f,g,1);};r.Pe=function(i,d){if(i.isFakeOver(d))return;if(o.F5)window.clearTimeout(o.F5);this.nA(i,d);if(this.getState()==o.zq)d.childNodes[2].style.backgroundImage=ub.D+o.nR+ub.E;if(o.KT!=null&&this!=o.KT&&o.KT.getParent()==this.getParent()||jsx3.EventHelp.FLAG==1&&this.getCanDrop()==1)this.showMenu(i,d,1);};r.nk=function(f,g){if(f.isFakeOut(g))return;if(o.F5)window.clearTimeout(o.F5);if(this.getState()==o.zq||g!=this._jsxB9[0]){this.i9(f,g);g.childNodes[2].style.backgroundImage=ub.D+o.ZI+ub.E;}};r.gu=function(q,c){if(q.hasModifier(true))return;var
ba=o.rH(q,c);var
Pa=parseInt(c.getAttribute(ub.C));var
O=ba?ba.getAttribute(ub.A):null;var
pb=ba&&ba.getAttribute(ub.v)==ub.w;var
Ha=q.keyCode();if((Ha==32||Ha==13)&&!pb){this.PN(q,O);this.F9();}else if(Ha==39){if(ba&&ba.getAttribute(ub.F)==ub.G&&!pb){this.showMenu(q,ba,Pa+1,O);}else this.yQ(true);}else if(Ha==37){if(Pa>1)this.F9(Pa);else this.yQ(false);}else if(Ha==27){this.F9();}else if(Ha==40){if(!ba)ba=c.lastChild;for(var
Ib=ba;true;){if(Ib==Ib.parentNode.lastChild){Ib=Ib.parentNode.firstChild;}else Ib=Ib.nextSibling;if(Ib==ba)break;if(Ib.getAttribute(ub.v)!=ub.w){this.dx(q,Ib,Pa);break;}}}else if(Ha==38){if(!ba)ba=c.firstChild;for(var
Ib=ba;true;){if(Ib==Ib.parentNode.firstChild){Ib=Ib.parentNode.lastChild;}else Ib=Ib.previousSibling;if(Ib==ba)break;if(Ib.getAttribute(ub.v)!=ub.w){this.dx(q,Ib,Pa);break;}}}else if(Ha==9){Ya[q.shiftKey()?ub.H:ub.I](this.getRendered(q),q);return;}else return;q.cancelAll();};r.yQ=function(b){var
Va=(this.getParent()).getChildren();var
x=this.getChildIndex();var
hb=b?1:-1;for(var
ea=x;true;){ea=jsx3.util.numMod(ea+hb,Va.length);if(ea==x)break;var
Hb=Va[ea];if(Hb instanceof o&&Hb.getDisplay()!=ub.J){try{Hb.focus();}catch(Kb){}break;}}};r.UC=function(s,m){if(!s.leftButton()){s.cancelBubble();return;}var
Aa=parseInt(m.getAttribute(ub.C));var
Xa=o.rH(s,m);if(Xa&&Xa.getAttribute(ub.F)==ub.G)this.showMenu(s,Xa,Aa+1,Xa.getAttribute(ub.A));s.cancelBubble();};r.yz=function(i,d){if(!i.leftButton())i.cancelBubble();};r.j8=function(s,m){var
Fa=o.rH(s,m);if(Fa&&s.isFakeOver(Fa))return;if(o.F5)window.clearTimeout(o.F5);o.F6();var
B=parseInt(m.getAttribute(ub.C));if(Fa){var
ka=Fa.getAttribute(ub.F);var
Hb=Fa.getAttribute(ub.v)==ub.w;var
xb=Fa.getAttribute(ub.A);this.dx(s,Fa,B);if(ka==ub.G)if(!this.eQ(xb)){var
ca=this;s.he();o.F5=window.setTimeout(function(){if(ca.getParent()==null)return;o.F5=null;ca.showMenu(s,Fa,B+1,xb);},o.xH);}if(xb!=null)this.MT(s,xb,ka==ub.G);}};r.MT=function(q,i,e){if(this.hasEvent(ub.K)){q.he();var
na=this;o.BF=window.setTimeout(function(){if(na.getParent()==null)return;o.BF=null;var
P=na.doEvent(ub.K,{objEVENT:q,strRECORDID:i});if(P){jsx3.gui.Interactive.hideSpy();na.showSpy(P,q);}},e?o.HQ:jsx3.EventHelp.HQ);}};o.F6=function(){if(o.BF){window.clearTimeout(o.BF);o.BF=null;}jsx3.gui.Interactive.hideSpy();};o.rH=function(n,b){var
sb=n.srcElement();while(sb!=null&&sb.getAttribute(ub.F)==null){sb=sb.parentNode;if(sb==b||sb==b.ownerDocument)sb=null;}return sb;};r.hO=function(q,m){if(!q.leftButton()){q.cancelBubble();return;}var
J=o.rH(q,m);if(J){var
Hb=J.getAttribute(ub.F);var
A=J.getAttribute(ub.v);if(Hb!=ub.G&&!A){this.PN(q,J.getAttribute(ub.A));this.F9();}}};r.my=function(d){this.F9(1,true);};r.F9=function(i,m){if(this!=o.KT)return;if(i==null)i=1;if(i==1)C.unsubscribeLoseFocus(this,this);if(o.bv)window.clearTimeout(o.bv);o.F6();this.lH(i-1,null);for(var
ib=o.H3.length-1;ib>=i-1;ib--){var
t=o.H3[ib];if(t)t.destroy();}o.H3.splice(i-1,o.H3.length);o.dL.splice(i,o.dL.length);if(i==1){this.CF(o.zq);this.doEvent(ub.L);o.KT=null;o.nG=false;}if(!m)try{if(this._jsxB9[i-1])this._jsxB9[i-1].focus();else if(i==1)this.focus();}catch(Kb){}this._jsxB9.splice(i-1,this._jsxB9.length);};r.showContextMenu=function(m,e,b,c){o.nG=true;this._jsxx7=e;this._jsxtT=b;this.showMenu(m,null,1,null,c);};r.getContextParent=function(){return this._jsxx7;};r.getContextRecordId=function(){return this._jsxtT;};r.showMenu=function(a,g,k,q,j){var
ab=this.doEvent(ub.M,{objEVENT:a,objANCHOR:g,intINDEX:k,strPARENTID:q,_gipp:1});if(ab===false)return;if(g==null&&q!=null)g=this.getRendered(a);if(k==1){if(o.KT)o.KT.F9(1,true);o.KT=this;this._jsxX1=true;}a.he();jsx3.sleep(function(){this._s(a,g,k,q,j);},ub.N,this,true);if(this._jsxB9==null)this._jsxB9=[];};r._s=function(f,j,p,l,e){if(p>1&&!o.H3[p-2])return;this._jsxB9[p-1]=j;this.lH(p,l);var
lb=o.Xx+p;var
Ua=this.aY(l,p);var
A=ub.O+o.rq()+ub.P;var
zb=ub.Q+p+ub.R+this.pi(ub.S,ub.T)+this.pi(ub.U,ub.V)+this.pi(ub.W,ub.X)+this.pi(ub.Y,ub.Z)+this.pi(ub._,ub.aa)+ub.ba+A+ub.ca+this.Uc()+this.ti()+ub.da+Ua+ub.ea;var
Gb=o.H3[p-1];if(Gb)Gb.destroy();var
ta=o.H3[p-1]=new
jsx3.gui.Heavyweight(lb,this);ta.setHTML(zb);ta.setScrolling(true);if(j&&l!=null){ta.addXRule(j,ub.fa,ub.ga,-4);ta.addXRule(j,ub.ga,ub.fa,8);ta.addYRule(j,ub.ha,ub.ha,0);ta.addYRule(j,ub.ha,ub.ia,24);ta.addRule(null,ub.ha,0,ub.ja);}else if(j){ta.addXRule(j,ub.ga,ub.ga,0);ta.addXRule(j,ub.fa,ub.fa,0);ta.addYRule(j,ub.ia,ub.ha,0);ta.addYRule(j,ub.ha,ub.ia,0);}else{ta.addXRule(e?e.L:f,null,ub.ga,o.DEFAULTCONTEXTLEFTOFFSET);ta.addXRule(e?e.L:f,null,ub.fa,-o.DEFAULTCONTEXTLEFTOFFSET);ta.addYRule(e?e.T:f,null,ub.ha,o.aS);ta.addYRule(e?e.T:f,null,ub.ia,-o.aS);ta.addRule(null,ub.ha,0,ub.ja);}if(p==1&&!o.nG)this.CF(o.UV,j);ta.show();var
gb=ta.getRendered(j);var
Ra=gb.childNodes[0].childNodes[0];if(jsx3.CLASS_LOADER.IE){var
ab=Math.max(Ra.offsetWidth-2,Ra.clientWidth);for(var
Oa=0;Oa<Ra.childNodes.length;Oa++){var
Bb=Ra.childNodes[Oa];if(Bb.nodeName&&Bb.nodeName.toLowerCase()==ub.ka)if(Bb.getAttribute(ub.A))Ra.childNodes[Oa].style.width=ab+ub.la;else if(Bb.getAttribute(ub.F)==ub.ma&&Bb.offsetWidth<30)Ra.childNodes[Oa].style.width=Math.max(0,ab-(Bb.offsetWidth-1))+ub.la;}}if(p>1&&(f.getType()).indexOf(ub.na)==0){this.dx(f,Ra.childNodes[0],p);}else Ya.focus(Ra);if(p==1){C.subscribeLoseFocus(this,this,ub.oa);jsx3.sleep(function(){this._jsxX1=false;},null,this);}};r.repaint=function(){this.F9();return this.jsxsuper();};o.rq=function(){var
Ka=Ya.getMode();if(Ka==2&&jsx3.CLASS_LOADER.IE7)Ka=Ka+ub.pa;return Ka;};r.aY=function(l,p){var
A={jsxtabindex:this.getIndex()?this.getIndex():0,jsxselectedimage:o.L4,jsxtransparentimage:jsx3.gui.Block.SPACE,jsxdragtype:ub.qa,jsxid:this.getId(),jsxsubmenuimage:o.mt,jsxmode:o.rq(),jsxpath:jsx3.getEnv(ub.ra),jsxpathapps:jsx3.getEnv(ub.sa),jsxpathprefix:(this.getUriResolver()).getUriPrefix(),jsxappprefix:(this.getServer()).getUriPrefix(),jsxkeycodes:this.Tw(l)};if(l!=null)A.jsxrootid=l;var
Aa=this.getXSLParams();for(var K in Aa)A[K]=Aa[K];var
Nb=this.doTransform(A);if(!jsx3.xml.Template.supports(1))Nb=Ya.removeOutputEscapingSpan(Nb);Nb=this.Xl(Nb);if(jsx3.util.strTrim(Nb)==ub.u)Nb=o.yu.format((o.rq()).toString(),this._getLocaleProp(ub.ta));return Nb;};r.Tw=function(s){if(this._jsxq2==null)return ub.u;var
Oa=[];for(var db in this._jsxq2)Oa[Oa.length]=db+ub.ua+this._jsxq2[db].getFormatted();Oa[Oa.length]=ub.u;return Oa.join(ub.va);};r.clearCachedContent=function(){};r.getState=function(){return this._jsxBA!=null?this._jsxBA:o.zq;};r.CF=function(l,j){if(j==null)j=this.getRendered(j);if(j!=null)if(l==o.UV){if(o.Ov==this)return this;if(o.Ov!=null)o.Ov.CF(o.zq);j.style.backgroundImage=ub.D+o.SD+ub.E;j.childNodes[3].style.backgroundColor=o.B3;j.childNodes[2].style.backgroundImage=ub.D+o.Iv+ub.E;o.Ov=this;}else{j.style.backgroundImage=ub.u;j.childNodes[3].style.backgroundColor=ub.u;j.childNodes[2].style.backgroundImage=ub.D+o.ZI+ub.E;if(o.Ov==this)o.Ov=null;}this._jsxBA=l;return this;};r.Aw=function(){if(this._jsxq2!=null)for(var Ga in this._jsxq2)this._jsxq2[Ga].destroy();this._jsxq2={};var
Xa=this.getId();var
ob=this.getXML();if(ob!=null)for(var
cb=ob.selectNodeIterator(ub.wa);cb.hasNext();){var
lb=cb.next();var
z=(lb.getAttribute(ub.xa)).toLowerCase();var
gb=lb.getAttribute(ub.A);var
jb=jsx3.makeCallback(function(Xa,q){this.cB(q,Xa);},this,gb);var
Sa=this.doKeyBinding(jb,z);if(Sa)this._jsxq2[gb]=Sa;}};r.cB=function(q,k){var
N=this.getRecordNode(k);if(N==null)return;var
sb=N.getParent();var
oa=sb!=null&&sb.getNodeName()==ub.ya?sb.getAttribute(ub.A):null;var
Fb=this.doEvent(ub.M,{objEVENT:q,objANCHOR:null,intINDEX:null,strPARENTID:oa});if(Fb===false)return;if(this.isItemEnabled(k))this.PN(q,k);};o.Tj={};o.Tj[ub.U]=true;o.Tj[ub.Y]=true;o.Tj[ub.za]=true;o.Tj[ub.S]=true;o.Tj[ub.Aa]=ub.Ba;o.Tj[ub.Ca]=ub.Da;r.Rc=function(b,e,p){this.ag(b,e,p,3);};r.Vm=function(){this.applyDynamicProperties();var
I=this.getRelativePosition()!=0;var
U={height:22};if(I){var
Ka=this.getMargin();U.margin=Ka!=null&&Ka!=ub.u?Ka:ub.Ea;U.tagname=ub.Fa;U.boxtype=ub.Ga;}else{var
rb=this.getLeft();var
Fb=this.getTop();U.left=rb!=null&&rb!=ub.u?rb:0;U.top=Fb!=null&&Fb!=ub.u?Fb:0;U.tagname=ub.ka;U.boxtype=ub.Ha;}if(this.getDivider()==1){U.padding=ub.Ia;U.border=ub.Ja+o.B3;}var
Da=new
jsx3.gui.Painted.Box(U);U={height:22,tagname:ub.Fa,boxtype:ub.Ga};U.width=this.getImage()!=null&&this.getImage()!=ub.u?22:3;var
_=new
jsx3.gui.Painted.Box(U);Da.bl(_);U={height:22,tagname:ub.Fa,boxtype:ub.Ga};if(jsx3.util.strEmpty(this.getText())){U.width=1;}else U.padding=ub.Ka;var
E=new
jsx3.gui.Painted.Box(U);Da.bl(E);var
za=new
jsx3.gui.Painted.Box({width:11,height:22,tagname:ub.Fa,boxtype:ub.Ga});Da.bl(za);var
Aa=new
jsx3.gui.Painted.Box({width:1,height:22,tagname:ub.Fa,boxtype:ub.Ga});Da.bl(Aa);return Da;};r.paint=function(){this.applyDynamicProperties();if(this.getXmlAsync())var
Aa=this.getXML();this.Aw();var
eb=this;var
Qa=this.getState()==o.UV?ub.a+o.SD+ub.La:ub.u;var
Ka=this.qg();var
Sa=this.Ne();var
Q=null,Mb=null,Za=null;if(this.getEnabled()==1){Q=this.Pj(o.Tj,0);Za=ub.u;}else{Q=ub.u;Za=Ya.getCSSOpacity(0.4);}if(this.getImage()!=null)Mb=(this.getUriResolver()).resolveURI(this.getImage());var
Ea=this.renderAttributes(null,true);var
rb=this.Wl(true);rb.setAttributes(ub.Ma+this.getId()+ub.Na+this.uj()+this.Rh()+this.di()+Q+ub.Oa+Ea);rb.setStyles(this.yg(true)+Qa+Ka+Sa+Za+this.en()+this.Ae());var
Nb=rb.lg(0);Nb.setStyles(Mb!=null?ub.a+Mb+ub.La:ub.u);Nb.setAttributes(ub.Pa+Ya.pe);var
xb=rb.lg(1);xb.setAttributes(ub.Qa+Ya.pe);var
kb=this.getText();if(kb!=null&&kb!=ub.u){xb.setStyles(this.Gd()+this.wm()+this.ze()+this._i());}else{kb=ub.Ra;xb.setStyles(Ya.hl);}var
V=rb.lg(2);V.setStyles(ub.a+(this.getState()==o.UV?o.Iv:o.ZI)+ub.La);V.setAttributes(ub.Sa);var
pb=rb.lg(3);pb.setStyles(ub.Ta+(this.getState()==o.UV?ub.Ua+o.B3+ub.Va:ub.u));pb.setAttributes(ub.Wa);return (rb.paint()).join((Nb.paint()).join(ub.Ra)+(xb.paint()).join(kb)+(V.paint()).join(ub.Ra)+(pb.paint()).join(ub.Ra));};r.onXmlBinding=function(a){this.jsxsupermix(a);this.Aw();};r.Uc=function(){return ub.Ua+(this.getBackgroundColor()?this.getBackgroundColor():o.DEFAULTBACKGROUNDCOLOR)+ub.Va;};r.ti=function(){return this.getBackground()?this.getBackground()+ub.Va:o.DEFAULTBACKGROUND;};r.executeRecord=function(c){this.PN(this.isOldEventProtocol(),c);return this;};r.PN=function(a,f){var
M=null;if((M=this.getRecordNode(f))!=null){this._jsxvalue=f;var
K=M.getAttribute(ub.Xa);var
qb=true;var
Gb={strRECORDID:f,objRECORD:M,_gipp:1};if(a instanceof jsx3.gui.Event)Gb.objEVENT=a;qb=jsx3.util.strEmpty(K)?true:this.eval(K,this._getEvtContext(Gb));if(qb!==false&&a)this.doEvent(ub.Xa,Gb);}};r.redrawRecord=function(){if(this==o.KT)this.F9();return this;};r.getValue=function(){return this._jsxvalue;};r.doValidate=function(){return (this.setValidationState(1)).getValidationState();};r.beep=function(){var
T=this.getRendered();jsx3.gui.Cc(T.childNodes[2],{backgroundImage:ub.D+o.Sz+ub.E});jsx3.gui.Cc(T,{backgroundImage:ub.D+o.CZ+ub.E});jsx3.gui.Cc(T.childNodes[3],{backgroundColor:ub.Ya});return this;};o.getVersion=function(){return ub.Za;};r.emGetSession=function(c){if(!c){return jsx3.gui.Matrix.EditMask.prototype.emGetSession.call(this);}else{var
Ib=c.srcElement();while(Ib&&Ib.tagName.toLowerCase()!=ub._a)Ib=Ib.parentNode;var
Ia=Ib.parentNode.getAttribute(ub.A);var
_a=this.getAncestorOfType(ub.ab);var
Gb=(_a.Xi())[Ib.cellIndex];var
Mb=Gb.getValueForRecord(Ia);return {matrix:_a,column:Gb,recordId:Ia,td:Ib,value:Mb};}};r.emGetType=function(){return jsx3.gui.Matrix.EditMask.FORMAT;};r.emInit=function(h){this.jsxsupermix(h);this.subscribe(ub.Xa,this,ub.bb);};r.emSetValue=function(l){};r.emGetValue=function(){return null;};r.emBeginEdit=function(m,b,d,i,l,c,s){var
K=s.childNodes[0].childNodes[0];if(K){this.jsxsupermix(m,b,d,i,l,c,s);Ya.focus(K);}else return false;};r.emPaintTemplate=function(){this.setEnabled(0);var
Ca=this.paint();this.setEnabled(1);var
O=this.paint();return this.emGetTemplate(O,Ca);};r.pt=function(q){var
kb=this.emGetSession();if(kb){Ya.focus(kb.td);this.F9(1,true);}};r.containsHtmlElement=function(n){var
M=this.jsxsuper(n);if(!M&&this==o.KT)for(var
pb=0;pb<o.H3.length&&!M;pb++){var
Kb=o.H3[pb];if(Kb)M=Kb.containsHtmlElement(n);}return M;};r.getDivider=function(){return this.jsxdivider!=null?this.jsxdivider:0;};r.setDivider=function(a,n){this.jsxdivider=a;if(n)this.recalcBox([ub.cb,ub.db]);else this.ce();return this;};r.emCollapseEdit=function(a){this.F9(1,true);};});jsx3.gui.Menu.prototype.sK=jsx3.gui.ToolbarButton.prototype.Xg;jsx3.gui.Menu.prototype.nA=jsx3.gui.ToolbarButton.prototype.Pe;jsx3.gui.Menu.prototype.i9=jsx3.gui.ToolbarButton.prototype.nk;jsx3.Menu=jsx3.gui.Menu;
